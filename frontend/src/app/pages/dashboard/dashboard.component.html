<div class="layout" [class.theme-dark]="theme === 'dark'" [class.sidebar-open]="sidebarOpen">
  <div class="overlay" *ngIf="sidebarOpen" (click)="closeSidebar()"></div>

  <aside class="sidebar">
    <div class="brand">
      <span class="brand-strong">HR</span><span class="brand-soft">MATE</span>
    </div>

    <nav class="nav">
      <button class="nav-item" [class.active]="active === 'absences'" (click)="select('absences')">
        <span class="nav-ico absences">üìÖ</span>
        <span class="nav-label">Mes absences</span>
      </button>
      <button class="nav-item" [class.active]="active === 'conges'" (click)="select('conges')">
        <span class="nav-ico conges">üå¥</span>
        <span class="nav-label">Mes cong√©s</span>
      </button>
      <button class="nav-item" [class.active]="active === 'emplois'" (click)="select('emplois')">
        <span class="nav-ico emplois">üíº</span>
        <span class="nav-label">Mes emplois</span>
      </button>
      <button class="nav-item" [class.active]="active === 'calendrier'" (click)="select('calendrier')">
        <span class="nav-ico calendrier">üóìÔ∏è</span>
        <span class="nav-label">Calendrier</span>
      </button>
    </nav>
  </aside>

  <main class="main">
    <header class="topbar">
      <button class="topbar-btn" type="button" (click)="toggleSidebar()">‚ò∞</button>
      <div class="topbar-title"></div>
      <div class="topbar-actions">
        <button class="topbar-theme" type="button" (click)="toggleTheme()">
          {{ theme === 'dark' ? '‚òÄÔ∏è' : 'üåô' }}
        </button>
        <button class="topbar-logout" type="button" (click)="logout()">Logout</button>
        <button class="topbar-fab" type="button">+</button>
      </div>
    </header>

    <section class="page">
      <div class="page-card">
        <div class="page-card-header">
          <div class="page-card-heading">{{ pageTitle }}</div>
        </div>

        <ng-container *ngIf="active === 'calendrier'">
          <div class="calendar">
            <div class="calendar-header">
              <button class="cal-nav" type="button" (click)="prevMonth()">‚Äπ</button>
              <div class="cal-title">{{ calendarTitle }}</div>
              <button class="cal-nav" type="button" (click)="nextMonth()">‚Ä∫</button>
            </div>

            <div class="cal-grid cal-dow">
              <div class="cal-cell">Lun</div>
              <div class="cal-cell">Mar</div>
              <div class="cal-cell">Mer</div>
              <div class="cal-cell">Jeu</div>
              <div class="cal-cell">Ven</div>
              <div class="cal-cell">Sam</div>
              <div class="cal-cell">Dim</div>
            </div>

            <div class="cal-grid cal-days">
              <ng-container *ngFor="let d of calendarDays">
                <div
                  class="cal-day"
                  [class.muted]="!d.inMonth"
                  [class.today]="d.isToday"
                >
                  {{ d.day }}
                </div>
              </ng-container>
            </div>
          </div>
        </ng-container>

        <ng-container *ngIf="active !== 'calendrier'">
          <div class="state error" *ngIf="error">{{ error }}</div>

          <div class="state" *ngIf="!error && (!data || data.length === 0)">
            Aucune donn√©e.
          </div>

          <div class="list" *ngIf="!error && data && data.length">
            <div class="table-wrap">
              <table class="data-table">
                <thead>
                  <tr>
                    <th *ngFor="let c of rawColumns">{{ getColumnLabel(c) }}</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let row of data">
                    <td *ngFor="let c of rawColumns">{{ formatCell(getCell(row, c)) }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </ng-container>
      </div>
    </section>
  </main>
</div>
